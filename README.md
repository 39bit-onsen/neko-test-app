# 🐱 猫日記 (Neko Diary)

愛猫の健康管理と思い出の記録ができる、多頭飼い対応・オフライン完全対応の総合猫管理PWAアプリです。

## 📱 アプリ概要

猫日記は、猫の飼い主が愛猫の日常を包括的に記録・管理できる高機能Webアプリケーションです。健康状態の変化を追跡し、行動パターンを把握し、大切な思い出を保存することで、より良い猫との生活をサポートします。獣医師や家族との情報共有、AI予測分析、完全なオフライン対応など、プロフェッショナルレベルの機能を提供します。

### 🎯 主要な特徴

#### 基本機能
- **4つの専門記録システム**: 食事・健康・行動・自由記録に特化した入力フォーム
- **写真・動画添付**: 画像・動画の圧縮・サムネイル生成に対応
- **編集・削除機能**: 既存の記録を後から修正・削除可能
- **下書き保存**: 自動保存（2秒間隔）＋手動下書き管理
- **ダークモード**: 目に優しい暗いテーマに切り替え可能

#### Phase 3.0 新機能 ⭐
- **多頭飼い完全対応**: 複数の猫を個別管理・比較分析
- **AI予測・分析**: 健康状態予測・行動パターン分析・天候影響分析
- **獣医師・家族共有**: 安全な記録共有・相談システム・コメント機能
- **PWA対応**: オフライン完全対応・プッシュ通知・ホーム画面インストール
- **自動バックアップ**: 増分バックアップ・復元機能・クラウド対応予定

#### 高度な機能
- **完全オフライン対応**: インターネット接続なしで全機能利用可能
- **プッシュ通知**: 健康アラート・リマインダー・重要通知
- **高度な分析**: 統計グラフ・トレンド分析・健康スコア・栄養分析
- **ソーシャル機能**: 獣医師との連携・家族メンバー管理・権限制御
- **レスポンシブデザイン**: スマートフォン、タブレット、PCどの端末でも快適に利用可能

## 🚀 クイックスタート

### 必要な環境
- Node.js (v16以上)
- npm または yarn

### インストールと起動

```bash
# リポジトリのクローン
git clone https://github.com/39bit-onsen/neko-test-app.git
cd neko-test-app

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm start
```

ブラウザで `http://localhost:3000` にアクセスしてアプリを開始できます。

## 📊 機能詳細

### 🍽️ 食事記録
愛猫の食事習慣を詳細に記録し、健康管理に役立てます。

**記録項目:**
- 食事時間と食事の種類（ドライフード、ウェットフード、おやつ等）
- 給餌量（グラム、ミリリットル、個数単位で記録）
- 食欲レベル（5段階評価：とても良い〜食べない）
- 完食状況
- 特記事項（好みの変化、食べ方の特徴など）

**活用例:**
- 食欲不振の早期発見
- 獣医師への正確な食事報告
- 最適な給餌量の把握

### 💊 健康記録
体調の変化を見逃さず、愛猫の健康状態を継続的に監視できます。

**記録項目:**
- 体重・体温の計測値
- 症状の選択（元気がない、食欲不振、嘔吐、下痢等12種類＋カスタム入力）
- 投薬記録（薬名、用量、時間の詳細管理）
- 動物病院受診の記録
- 獣医師の診断・処置内容

**活用例:**
- 体重変化のグラフ化による肥満・痩せすぎの管理
- 症状の頻度分析
- 病院での正確な症状報告
- 薬の投与スケジュール管理

### 🎾 行動記録
愛猫の日常的な行動パターンを記録し、性格や健康状態を把握します。

**記録項目:**
- 活動レベル（5段階：とても活発〜元気がない）
- 睡眠時間・遊び時間の記録
- トイレ使用回数
- 特別な行動（12種類の一般的行動＋カスタム入力）
- よくいる場所の記録

**活用例:**
- 老化による活動量変化の把握
- ストレス状態の早期発見
- 環境変化への適応状況の確認
- 行動の問題の特定と対策

### 📝 自由記録
日記形式で愛猫との思い出や特別な出来事を記録できます。

**記録項目:**
- タイトルと詳細内容
- タグ機能（12種類の定型タグ＋カスタムタグ）
- 写真・動画添付（最大5ファイル）
- 感情や気づきの自由記述

**活用例:**
- 成長記録の保存
- 面白いエピソードの記録
- 初めての体験の記録
- 季節ごとの変化の観察

### 📸 メディア添付機能
すべての記録タイプで写真・動画の添付が可能です。

**対応形式:**
- **画像**: JPEG, PNG, WebP, GIF（最大5MB）
- **動画**: MP4, WebM, MOV, AVI（最大20MB）

**機能:**
- ドラッグ&ドロップでのファイル追加
- 自動画像圧縮（1MB以上の画像）
- 動画サムネイル自動生成
- キャプション追加
- ファイルサイズ表示

## 🔍 検索・分析機能

### 高度な検索システム
- **カテゴリーフィルター**: 記録タイプ別の表示切り替え
- **キーワード検索**: 症状、行動、タグ、内容を横断検索
- **日付範囲指定**: 特定期間の記録を抽出
- **並び替え**: 日付順・カテゴリー順の切り替え

### データ表示モード
- **タイムライン表示**: 時系列での記録確認
- **カテゴリー別表示**: 同じタイプの記録をまとめて確認
- **統計情報**: 記録件数や傾向の概要表示

## 🛠️ 技術仕様

### フロントエンド技術スタック
- **React 19**: 最新のReactフレームワーク
- **TypeScript 4.9**: 型安全な開発環境
- **CSS Grid & Flexbox**: レスポンシブレイアウト
- **IndexedDB**: ブラウザ内データベース
- **Canvas API**: 画像圧縮・サムネイル生成

### データ管理
- **オフラインファースト設計**: ネットワーク接続に依存しない
- **自動データ永続化**: 入力内容の自動保存（2秒間隔）
- **下書き管理**: localStorage使用、最大10件保存
- **型安全なデータ構造**: TypeScriptによる堅牢なデータ管理
- **メディアファイル処理**: 自動圧縮・最適化

### アーキテクチャ
```
src/
├── components/           # Reactコンポーネント
│   ├── CatDiary.tsx     # メインコンテナ
│   ├── EntryForm/       # 入力フォーム群
│   ├── EntryList/       # 表示・検索UI
│   ├── MediaUpload/     # メディアアップロード
│   └── DraftManager/    # 下書き管理
├── contexts/            # React Context
│   └── ThemeContext.tsx # ダークモード管理
├── types/               # TypeScript型定義
├── utils/               # ユーティリティ関数
│   ├── storage.ts       # IndexedDB管理
│   ├── draftStorage.ts  # 下書き管理
│   └── mediaUtils.ts    # メディア処理
└── styles/              # CSSファイル
```

## 📱 対応環境

### ブラウザサポート
- **デスクトップ**: Chrome, Firefox, Safari, Edge (最新版)
- **モバイル**: iOS Safari, Android Chrome
- **PWA対応**: 将来的にホーム画面への追加機能を予定

### レスポンシブデザイン
- **スマートフォン**: 320px〜768px
- **タブレット**: 768px〜1024px  
- **デスクトップ**: 1024px以上

## 🚧 開発者向け情報

### 開発コマンド
```bash
# 開発サーバー起動
npm start

# プロダクションビルド
npm run build

# テスト実行
npm test

# テストカバレッジ
npm test -- --coverage
```

### コードスタイル
- **ESLint**: React/TypeScript推奨設定
- **Prettier**: コード整形（設定により）
- **型安全**: strict TypeScript設定

### 開発のポイント
- コンポーネントは機能別に分離
- 型定義は`src/types/index.ts`に集約
- スタイルはコンポーネント単位で管理
- IndexedDBの操作は`StorageManager`クラス経由
- メディア処理は`mediaUtils.ts`の関数を使用
- テーマ管理は`ThemeContext`を経由
- 下書き保存は`draftStorage.ts`を使用

## ✅ 実装完了機能（Phase 3.0完了）

### Phase 1: 基本機能
- ✅ **エントリー編集・削除**: 既存記録の修正・削除機能
- ✅ **ダークモード**: テーマ切り替え機能
- ✅ **下書き保存**: 自動保存・手動保存機能
- ✅ **写真・動画添付**: メディアファイルのアップロード・圧縮機能

### Phase 2: 分析・統計機能
- ✅ **統計・グラフ機能**: 体重変化や活動パターンの可視化
- ✅ **健康ダッシュボード**: 健康スコア・アラート・トレンド表示
- ✅ **栄養分析**: 食事パターン・摂取量・栄養バランス分析
- ✅ **リマインダー機能**: 薬の投与や健康診断の通知

### Phase 3: 高度機能・ソーシャル・PWA
- ✅ **多頭飼い管理**: 複数猫の個別管理・比較分析・プロファイル管理
- ✅ **AI予測分析**: 健康状態予測・行動パターン分析・天候影響分析
- ✅ **獣医師連携**: 記録共有・相談システム・コメント機能・診断管理
- ✅ **家族共有**: メンバー招待・権限管理・通知設定・プライバシー制御
- ✅ **PWA対応**: Service Worker・オフライン完全対応・キャッシュ戦略
- ✅ **プッシュ通知**: 健康アラート・リマインダー・背景同期・通知センター
- ✅ **自動バックアップ**: 増分バックアップ・復元機能・データ整合性チェック

## 🔮 今後の拡張計画

### Phase 4（計画中）
- **クラウド同期**: Google Drive/Dropbox連携・デバイス間データ共有
- **高度AIアシスト**: 画像認識による健康状態分析・異常検知
- **コミュニティ機能**: 飼い主同士の情報交換・経験共有
- **獣医師プロ機能**: 診療記録テンプレート・処方箋管理・予約連携

### 長期ロードマップ
- **IoTデバイス連携**: スマート給餌器・体重計・カメラとの自動連携
- **多言語対応**: 英語・中国語・韓国語サポート
- **API開放**: サードパーティ連携・プラグインシステム
- **エンタープライズ版**: 動物病院・ペットショップ向け機能

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 コントリビューション

プルリクエストやIssueを歓迎します。大きな変更を提案する場合は、まずIssueで議論してください。

## 📞 サポート

- **GitHub Issues**: バグ報告や機能要望
- **プロジェクトWiki**: 詳細なドキュメント（準備中）

---

**愛猫との素晴らしい時間を、猫日記と一緒に記録しましょう！** 🐾